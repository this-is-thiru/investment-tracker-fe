<section class="font-[Manrope] text-white text-sm min-h-full flex justify-center items-center bg-background pt-10">
  <div class="flex w-full min-w-[380px] flex-col items-center">
    <section class="flex justify-center p-5 w-full">
      <div class="flex w-full flex-col">

        <!-- Header -->
        <div class="flex flex-wrap justify-between px-4 py-2 text-lg font-bold">
          <b>Upload Transactions</b>
        </div>

        <p class="px-4 text-[#adadad] pb-4">
          Download our Excel template to easily input your transaction data. Fill in the required fields and upload the
          file to update your transaction history.
        </p>

        <!-- Download Template Button -->
        <button
          class="mx-4 flex h-10 max-w-44 items-center justify-center rounded-xl bg-surface px-5 py-2 text-center font-medium
                 text-white border border-transparent hover:bg-surfaceHover hover:border-white transition-colors duration-200 ease-in-out cursor-pointer"
          (click)="downloadTemplate()">
          Download Template
        </button>

        <!-- Upload Box -->
        <div class="p-4">
          <div class="flex flex-col items-center gap-6 rounded-xl border-2 border-dashed border-[#4d4d4d] p-8 relative w-full
                   transition-colors duration-200 hover:border-white" (drop)="onDrop($event)"
            (dragover)="onDragOver($event)">

            <!-- Default state -->
            <ng-container *ngIf="!uploading && !uploadedFile">
              <div class="flex max-w-[480px] flex-col items-center gap-3 text-center">
                <b>Drag and drop or browse to upload</b>
                <p class="text-[#adadad] text-sm">
                  Supported file types: .xlsx. Please use the provided template for accurate data processing.
                </p>
              </div>

              <!-- Browse Files Button -->
              <button
                class="mt-2 flex h-10 max-w-[480px] min-w-[84px] items-center justify-center rounded-xl bg-surface px-5 py-2 text-center font-medium
                       text-white border border-transparent hover:bg-surfaceHover hover:border-white transition-colors duration-200 ease-in-out cursor-pointer"
                (click)="browseFiles(fileInput)">
                Browse Files
              </button>
              <input #fileInput type="file" class="hidden" accept=".xlsx" (change)="handleFile($event)" />
            </ng-container>

            <!-- Uploading state -->
            <ng-container *ngIf="uploading">
              <span class="font-medium mb-2">Uploading...</span>
              <div class="h-2 w-full rounded bg-[#4d4d4d]">
                <div class="h-2 rounded bg-black" [style.width.%]="progress"></div>
              </div>
              <span class="text-[#adadad] mt-2">{{ progress }}%</span>
            </ng-container>


            <!-- Uploaded state -->
            <ng-container *ngIf="uploadedFile && !uploading">
              <div class="flex flex-col items-center gap-2">
                <span class="font-medium">Upload Complete âœ…</span>
                <span>File: {{ uploadedFile.name }}</span>
                <span class="text-[#adadad]">Size: {{ getFileSize(uploadedFile.size) }}</span>

                <!-- Deselect Button -->
                <button
                  class="mt-2 flex h-10 max-w-[480px] min-w-[84px] items-center justify-center rounded-xl bg-surface px-5 py-2 text-center font-medium
                         text-white border border-transparent hover:bg-surfaceHover hover:border-white transition-colors duration-200 ease-in-out cursor-pointer"
                  (click)="removeFile()">
                  Deselect File
                </button>
              </div>
            </ng-container>

          </div>
        </div>

        <footer class="text-center text-[#adadad] mt-3 text-xs">
          By uploading, you agree to our
          <a routerLink="/terms" class="underline hover:text-white transition-colors duration-150">Terms &
            Conditions</a>.
        </footer>
      </div>
    </section>
  </div>
</section>
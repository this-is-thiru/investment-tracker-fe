<div class="flex flex-col gap-6 w-full min-h-screen bg-background text-textPrimary p-6 font-sans">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <h2 class="text-xl font-semibold">View Transactions</h2>

    <form [formGroup]="transactionForm" (ngSubmit)="fetchTransactions()" class="flex gap-2">
      <input
        type="email"
        pInputText
        formControlName="email"
        placeholder="Enter email"
        class="bg-surface text-textPrimary border border-border rounded-md px-3 py-2 focus:ring-1 focus:ring-accent w-64"
      />
      <button
        pButton
        type="submit"
        label="Fetch"
        [disabled]="loading"
        class="!bg-accent hover:!bg-accentHover text-white px-4 py-2 rounded-md"
      ></button>
    </form>
  </div>

  <!-- Search box -->
  <div class="relative w-full max-w-3xl">
    <i class="pi pi-search absolute left-3 top-1/2 -translate-y-1/2 text-textSecondary"></i>
    <input
      type="text"
      pInputText
      placeholder="Search transactions"
      (input)="onSearch($event)"
      class="w-full bg-surface text-textPrimary border border-border rounded-md pl-10 pr-3 py-2 focus:ring-1 focus:ring-accent"
    />
  </div>

  <!-- Table -->
  <p-table
    *ngIf="filteredTransactions.length > 0"
    [value]="filteredTransactions"
    [paginator]="true"
    [rows]="rowsPerPage"
    [first]="first"
    [rowsPerPageOptions]="[10, 20, 50]"
    (onPage)="onPageChange($event)"
    [showCurrentPageReport]="false"
    [loading]="loading"
    class="custom-dark-table"
  >
    <ng-template pTemplate="header">
      <tr>
        <th *ngFor="let column of displayedColumns" class="capitalize">{{ column }}</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-row>
      <tr>
        <td *ngFor="let column of displayedColumns">
          {{ row[column] }}
        </td>
      </tr>
    </ng-template>
  </p-table>

  <p *ngIf="!filteredTransactions.length && !loading" class="text-textSecondary text-sm">
    No transactions found.
  </p>
</div>

<!-- Overlay -->
<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4">

  <!-- Registration card -->
  <div class="w-full max-w-sm bg-surface rounded-xl shadow-lg p-5 relative text-white border border-border
              transition-transform duration-200 ease-out hover:scale-[1.002]">

    <!-- Close button -->
    <button type="button" (click)="onClose()" aria-label="Close" class="absolute right-3 top-3 p-2 rounded-full text-text-secondary hover:text-white hover:bg-surfaceHover
             focus:outline-none focus:ring-2 focus:ring-border transition">
      <svg width="18" height="18" viewBox="0 0 24 24">
        <line x1="5" y1="5" x2="19" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        <line x1="19" y1="5" x2="5" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
      </svg>
    </button>

    <!-- Title -->
    <header class="text-center mb-4">
      <h1 class="text-lg font-semibold text-white">Create your account</h1>
      <p class="text-xs text-text-secondary mt-1">Sign up to start tracking your investments</p>
    </header>

    <!-- Registration Form -->
    <form (ngSubmit)="onRegistration()" [formGroup]="registrationForm" class="space-y-3">

      <!-- Email -->
      <div>
        <label for="register-email" class="block text-xs font-medium mb-1 text-white">Email</label>
        <input id="register-email" type="email" formControlName="email" placeholder="Email Address" autocomplete="username"  class="h-10 w-full rounded-lg border border-border bg-background px-3 text-white placeholder-text-muted
                 focus:ring-2 focus:ring-border focus:outline-none transition" required />
      </div>

      <!-- Password -->
      <div class="relative">
        <label for="register-password" class="block text-xs font-medium mb-1 text-white">Password</label>
        <input id="register-password" [type]="hideRegistrationP ? 'password' : 'text'" formControlName="password"
          placeholder="Create a Password" autocomplete="new-password" class="h-10 w-full rounded-lg border border-border bg-background px-3 pr-10 text-white placeholder-text-muted
                focus:ring-2 focus:ring-border focus:outline-none transition" required />
        <button type="button" (click)="hideRegistrationP = !hideRegistrationP"
          class="absolute right-2 top-8 text-text-secondary hover:text-white transition">
          <ng-container *ngIf="hideRegistrationP; else showPassIcon">
            <!-- Eye closed -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-7.5 0-11-7-11-7s1.5-2.975 4.425-5.175M9.88 9.88a3 3 0 104.24 4.24" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.225 6.225l11.55 11.55" />
            </svg>
          </ng-container>
          <ng-template #showPassIcon>
            <!-- Eye open -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
          </ng-template>
        </button>
      </div>

      <!-- Confirm Password -->
      <div class="relative">
        <label for="register-confirm-password" class="block text-xs font-medium mb-1 text-white">Confirm
          Password</label>
        <input id="register-confirm-password" [type]="hideRegistrationCP ? 'password' : 'text'"
          formControlName="confirmPassword" placeholder="Re-enter Password" autocomplete="new-password" class="h-10 w-full rounded-lg border border-border bg-background px-3 pr-10 text-white placeholder-text-muted
                focus:ring-2 focus:ring-border focus:outline-none transition" required />
        <button type="button" (click)="hideRegistrationCP = !hideRegistrationCP"
          class="absolute right-2 top-8 text-text-secondary hover:text-white transition">
          <ng-container *ngIf="hideRegistrationCP; else showConfirmIcon">
            <!-- Eye closed -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-7.5 0-11-7-11-7s1.5-2.975 4.425-5.175M9.88 9.88a3 3 0 104.24 4.24" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.225 6.225l11.55 11.55" />
            </svg>
          </ng-container>
          <ng-template #showConfirmIcon>
            <!-- Eye open -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
          </ng-template>
        </button>
      </div>


      <!-- Sign up -->
      <button type="submit" [disabled]="registrationForm.invalid || isLoading"
        class="w-full h-10 rounded-full bg-white text-black font-medium hover:bg-gray-100 active:bg-gray-200 transition">
        Sign up
      </button>

      <!-- Google -->
      <button type="button" class="w-full h-10 rounded-full flex items-center justify-center gap-2 bg-surface border border-border
               text-white hover:bg-surfaceHover active:bg-surfaceHover/70 transition">
        <img class="h-4 w-4" src="../../../../assets/imgs/googleIcon.svg" alt="Google" />
        <span class="font-medium text-xs">Sign up with Google</span>
      </button>

      <!-- Switch to login -->
      <p class="text-center text-xs text-text-secondary mt-1">
        Already have an account?
        <a (click)="router.navigate([{ outlets: { modal: ['sign-in'] } }])"
          class="text-white hover:underline cursor-pointer transition">Sign in</a>
      </p>
    </form>
  </div>
</div>